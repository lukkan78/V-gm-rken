<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#0a0a0f">
  <meta name="description" content="V√§gm√§rkesf√∂rh√∂r - tr√§na p√• svenska v√§gm√§rken med quiz, spaced repetition och AI-rekommendationer.">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>V√§gm√§rkesf√∂rh√∂r - Tr√§na p√• svenska v√§gm√§rken</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="assets/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="assets/icon-192.png">
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Space+Mono:wght@700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <header>
      <div class="header-row">
        <div>
          <h1>V√ÑGM√ÑRKESF√ñRH√ñR</h1>
          <p class="subtitle">Tr√§na p√• svenska v√§gm√§rken</p>
          <div id="mini-stats"></div>
        </div>
        <div style="display: flex; gap: 10px;">
          <button class="ghost-btn" id="dashboard-btn" type="button">Statistik</button>
          <button class="btn btn-secondary" id="install-btn" type="button" hidden>Installera</button>
        </div>
      </div>
    </header>

    <div id="status-banner" class="status-banner" hidden></div>

    <!-- Start Screen -->
    <div id="start-screen">
      <h2 style="margin-bottom: 20px;">V√§lj kategorier</h2>
      <div class="category-actions">
        <button class="ghost-btn" type="button" id="select-all">V√§lj alla</button>
        <button class="ghost-btn" type="button" id="clear-all">Rensa</button>
      </div>
      <div class="category-grid" id="category-grid"></div>

      <div class="settings-card">
        <div>
          <h3>Quizinst√§llningar</h3>
          <p class="muted">Anpassa quiz efter dina preferenser.</p>
        </div>
        <div class="settings-row">
          <label class="setting">
            <span>Antal fr√•gor</span>
            <select id="question-count">
              <option value="5">5 fr√•gor</option>
              <option value="10">10 fr√•gor</option>
              <option value="15" selected>15 fr√•gor</option>
              <option value="20">20 fr√•gor</option>
              <option value="25">25 fr√•gor</option>
            </select>
          </label>
          <label class="setting">
            <span>Quiz-l√§ge</span>
            <select id="quiz-mode">
              <option value="standard">Standard</option>
              <option value="spaced">Spaced Repetition</option>
              <option value="weakest">Svagaste m√§rken</option>
              <option value="missed">Senast missade</option>
              <option value="adaptive">Adaptiv</option>
            </select>
          </label>
          <label class="setting">
            <span>Fr√•getyp</span>
            <select id="question-type">
              <option value="mixed">Blandad</option>
              <option value="image-to-text">Bild till text</option>
              <option value="text-to-image">Text till bild</option>
            </select>
          </label>
          <label class="setting">
            <span>Sv√•righetsgrad</span>
            <select id="difficulty">
              <option value="easy">L√§tt</option>
              <option value="medium">Medel</option>
              <option value="hard">Sv√•r</option>
              <option value="adaptive" selected>Adaptiv</option>
            </select>
          </label>
          <label class="setting">
            <span>Blanda svarsalternativ</span>
            <input type="checkbox" id="shuffle-options" checked>
          </label>
          <label class="setting">
            <span>Visa kategori</span>
            <input type="checkbox" id="show-category" checked>
          </label>
        </div>
      </div>

      <div style="margin-top: 30px;">
        <button class="btn" id="start-btn" type="button" disabled>Starta f√∂rh√∂r</button>
      </div>
      <p style="margin-top: 15px; color: var(--text-muted); font-size: 0.9rem;" id="selected-count">0 kategorier valda</p>
    </div>

    <!-- Quiz Screen -->
    <div id="quiz-screen">
      <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
      </div>
      <div class="stats-row">
        <div class="stat">
          <span class="stat-icon">‚ùì</span>
          <span id="question-counter">1 / 10</span>
        </div>
        <div class="stat">
          <span class="stat-icon">‚úÖ</span>
          <span id="correct-counter">0 r√§tt</span>
        </div>
        <div class="stat">
          <span class="stat-icon">üî•</span>
          <span id="streak-counter">0 i rad</span>
        </div>
      </div>
      <div class="question-card">
        <div id="question-container">
          <!-- Question content rendered dynamically -->
        </div>
        <div class="feedback" id="feedback">
          <div class="feedback-icon" id="feedback-icon"></div>
          <p id="feedback-text"></p>
        </div>
        <button class="btn next-btn" id="next-btn" type="button" style="display: none;">N√§sta fr√•ga</button>
      </div>
    </div>

    <!-- Results Screen -->
    <div id="results-screen">
      <div class="results-card">
        <h2 style="margin-bottom: 30px;">F√∂rh√∂ret avslutat!</h2>
        <div class="score-circle" id="score-circle">
          <span class="score-text" id="score-text">0%</span>
        </div>
        <p class="score-label">av fr√•gorna r√§tt</p>
        <div class="results-details">
          <div class="result-stat">
            <div class="result-stat-value correct-val" id="final-correct">0</div>
            <div class="result-stat-label">R√§tt</div>
          </div>
          <div class="result-stat">
            <div class="result-stat-value incorrect-val" id="final-incorrect">0</div>
            <div class="result-stat-label">Fel</div>
          </div>
        </div>
        <div id="missed-list" class="missed-list" hidden>
          <h3>Missade v√§gm√§rken</h3>
          <div class="missed-grid" id="missed-grid"></div>
        </div>
      </div>
      <div class="btn-group">
        <button class="btn" id="retry-btn" type="button">F√∂rs√∂k igen</button>
        <button class="btn btn-secondary" id="back-btn" type="button">V√§lj nya kategorier</button>
      </div>
    </div>

    <!-- Dashboard Screen -->
    <div id="dashboard-screen">
      <div id="dashboard-container">
        <!-- Dashboard content rendered dynamically -->
      </div>
    </div>

    <div class="source-note">
      V√§gm√§rkesbilderna h√§mtas direkt fr√•n <a href="https://www.transportstyrelsen.se/sv/vagtrafik/trafikregler-och-vagmarken/vagmarken/" target="_blank" rel="noreferrer">Transportstyrelsen</a>
    </div>
  </div>

  <script type="module" src="js/app.js"></script>
</body>
</html>
